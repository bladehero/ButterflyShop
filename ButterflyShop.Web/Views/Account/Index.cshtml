@model ButterflyShop.Web.Models.AccountModels.IndexVM
<!-- Page Banner Section Start -->
<div class="container">
    <div class="row">
        <div class="col">

            <div class="page-banner text-left">
                <h2>Мой аккаунт</h2>
                <ul class="page-breadcrumb">
                    <li><a href="@Url.Action("Index", "Home")">Главная</a></li>
                    <li>Мой аккаунт</li>
                </ul>
            </div>

        </div>
    </div>
</div>
<!-- Page Banner Section End -->
<!--My Account section start-->
<div class="my-account-section section pt-90 pt-lg-70 pt-md-60 pt-sm-50 pt-xs-45  pb-100 pb-lg-80 pb-md-70 pb-sm-60 pb-xs-50">
    <div class="container">
        <div class="row">

            <div class="col-12">
                <div class="row">
                    <!-- My Account Tab Menu Start -->
                    <div class="col-lg-3 col-12">
                        <div class="myaccount-tab-menu nav" role="tablist">
                            <a href="#dashboad" class="active" data-toggle="tab"><i class="fa fa-dashboard"></i>Панель управления</a>
                            <a href="#orders" data-toggle="tab"><i class="fa fa-cart-arrow-down"></i>Мои заказы</a>
                            <a href="#account-info" data-toggle="tab"><i class="fa fa-user"></i>Мои данные</a>
                            <a href="@Url.Action("Logout", "Account")"><i class="fa fa-sign-out"></i>Выйти</a>
                        </div>
                    </div>
                    <!-- My Account Tab Menu End -->
                    <!-- My Account Tab Content Start -->
                    <div class="col-lg-9 col-12">
                        <div class="tab-content" id="myaccountContent">
                            <!-- Single Tab Content Start -->
                            <div class="tab-pane fade show active" id="dashboad" role="tabpanel">
                                <div class="myaccount-content">
                                    <h3>Панель управления</h3>

                                    <div class="welcome mb-20">
                                        <p>Доброго времени суток, <strong>@($"{Model.User.FirstName} {Model.User.LastName}")</strong> (<a href="@Url.Action("Logout", "Account")" class="logout text-danger">нажмите сюда, если это не Вы</a>)</p>
                                    </div>

                                    <p class="mb-0">
                                        С панели управления учетной записью вы можете легко просматривать свои последние заказы, управлять адресами доставки и выставления счетов, а также редактировать свой пароль и данные учетной записи.
                                    </p>
                                </div>
                            </div>
                            <!-- Single Tab Content End -->
                            <!-- Single Tab Content Start -->
                            <div class="tab-pane fade" id="orders" role="tabpanel">
                                <div class="myaccount-content">
                                    <h3>Orders</h3>
                                    <div class="myaccount-table table-responsive text-center">
                                        <table class="table table-bordered">
                                            <thead class="thead-light">
                                                <tr>
                                                    <th>No</th>
                                                    <th>Name</th>
                                                    <th>Date</th>
                                                    <th>Status</th>
                                                    <th>Total</th>
                                                    <th>Action</th>
                                                </tr>
                                            </thead>

                                            <tbody>
                                                <tr>
                                                    <td>1</td>
                                                    <td>Mostarizing Oil</td>
                                                    <td>Aug 22, 2018</td>
                                                    <td>Pending</td>
                                                    <td>$45</td>
                                                    <td><a href="cart.html" class="btn">View</a></td>
                                                </tr>
                                                <tr>
                                                    <td>2</td>
                                                    <td>Katopeno Altuni</td>
                                                    <td>July 22, 2018</td>
                                                    <td>Approved</td>
                                                    <td>$100</td>
                                                    <td><a href="cart.html" class="btn">View</a></td>
                                                </tr>
                                                <tr>
                                                    <td>3</td>
                                                    <td>Murikhete Paris</td>
                                                    <td>June 12, 2017</td>
                                                    <td>On Hold</td>
                                                    <td>$99</td>
                                                    <td><a href="cart.html" class="btn">View</a></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <!-- Single Tab Content End -->
                            <!-- Single Tab Content Start -->
                            <div class="tab-pane fade" id="account-info" role="tabpanel">
                                <div class="myaccount-content">
                                    <h3>Мои данные</h3>

                                    <div class="account-details-form">
                                        <form action="@Url.Action("UpdateUserInfo", "Account")" method="post">
                                            <div class="row">
                                                <div class="col-lg-6 col-12 mb-30">
                                                    <input name="FirstName" id="first-name" placeholder="Имя*" type="text" value="@Model.User.FirstName">
                                                </div>
                                                <div class="col-lg-6 col-12 mb-30">
                                                    <input name="LastName" id="last-name" placeholder="Фамилия" type="text" value="@Model.User.LastName">
                                                </div>
                                                <div class="col-lg-6 col-12 mb-30">
                                                    <input name="Birthdate" id="display-name" placeholder="Дата рождения" type="date" value="@(Model.User.Birthdate.HasValue ? Model.User.Birthdate.Value.ToString("yyyy-MM-dd") : null)">
                                                </div>
                                                <div class="col-lg-6 col-12 mb-30">
                                                    <input name="Phone" id="last-name" placeholder="Телефон" type="tel" value="@Model.User.Phone">
                                                </div>
                                                <div class="col-12 mb-30">
                                                    <input name="Email" id="email" placeholder="Эл. почта*" type="email" value="@Model.User.Email">
                                                </div>
                                                <div class="col-12 mb-30">
                                                    <h4>Изменение текущего пароля:</h4>
                                                </div>
                                                <div class="col-12 mb-30">
                                                    <input name="CurrentPassword" id="current-pwd" placeholder="Текущий пароль" type="password">
                                                </div>
                                                <div class="col-lg-6 col-12 mb-30">
                                                    <input name="NewPassword" id="new-pwd" placeholder="Новый пароль" type="password">
                                                </div>
                                                <div class="col-lg-6 col-12 mb-30">
                                                    <input name="ConfirmPassword" id="confirm-pwd" placeholder="Подтвердить пароль" type="password">
                                                </div>
                                                <div class="col-12">
                                                    <button type="submit" class="save-change-btn">Сохранить</button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <!-- Single Tab Content End -->
                        </div>
                    </div>
                    <!-- My Account Tab Content End -->
                </div>

            </div>

        </div>
    </div>
</div>
<!--My Account section end-->

@if (Model.HasError)
{
    @section Scripts{
        <script>
            Swal.fire({
                title: 'Ошибка',
                type: 'error',
                html: '@Html.Raw(Model.Error)'
            });
        </script>
    }
}
else if (Model.UpdatedUserInfo)
{
    @section Scripts{
        <script>
            Swal.fire({
                title: 'Обновлено',
                type: 'success',
                html: 'Персональные данные были успешно обновлены!'
            });
        </script>
    }
}